import{j as e,a8 as S,J as C,a0 as k,a9 as A,M as D,aa as R,a7 as B,ab as E,a1 as H,ac as N}from"./ui-vendor-BPnJF_7J.js";import{C as p,a as f,d as b,b as y}from"./card-CoINBLpb.js";import{B as L}from"./index-C5bx2-Fn.js";import{B as T}from"./badge-CVKJlgmv.js";import{S as j}from"./skeleton-BmX8kKu8.js";import{E as U}from"./error-message-yDPqqqhZ.js";import{r}from"./react-vendor-Bgq3EpD8.js";import{s as w}from"./superadminApi-Bft6DRZm.js";import"./query-vendor-B3bfG-l7.js";import"./utils-vendor-Dq7h7Pqt.js";function V(){const[s,t]=r.useState(null),[x,o]=r.useState([]),[c,d]=r.useState(!0),[h,m]=r.useState(null),[a,l]=r.useState(!1),i=r.useCallback(async()=>{try{m(null);const[u,g]=await Promise.all([w.getDashboardStats(),w.getRecentActivity(20)]);t(u.data),o(g.data)}catch(u){console.error("Error fetching dashboard data:",u);let g="Failed to load dashboard data";u instanceof Error&&(g=u.message),m(g)}},[]),v=r.useCallback(async()=>{try{l(!0),await i()}finally{l(!1)}},[i]);return r.useEffect(()=>{i().finally(()=>{d(!1)})},[i]),{stats:s,recentActivity:x,loading:c,error:h,refreshing:a,refreshDashboard:v,setRefreshing:l}}const n=({title:s,value:t,icon:x,trend:o,trendValue:c,className:d=""})=>{const a=s==="System Health"||s==="API Status"?(l=>{switch(l.toLowerCase()){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"degraded":return"text-orange-600";case"error":case"slow":return"text-red-600";default:return"text-gray-600"}})(t):"";return e.jsxs(p,{className:`p-6 shadow-md rounded-2xl bg-white/90 ${d}`,children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-base font-semibold text-gray-800",children:s}),e.jsx("div",{className:"h-5 w-5 text-teal-600 bg-teal-50 rounded-full flex items-center justify-center",children:x})]}),e.jsxs(b,{children:[e.jsx("div",{className:`text-3xl font-extrabold mb-1 ${a||"text-teal-800"}`,children:t}),o&&e.jsxs("p",{className:"text-xs text-teal-500 font-medium",children:[o," ",c]})]})]})},K=()=>{var d,h,m;const{stats:s,recentActivity:t,loading:x,error:o,refreshDashboard:c}=V();return x?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((a,l)=>e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"h-4 w-24"}),e.jsx(j,{className:"h-4 w-4"})]}),e.jsxs(b,{children:[e.jsx(j,{className:"h-8 w-16 mb-2"}),e.jsx(j,{className:"h-3 w-20"})]})]},l))})}):e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-br from-white to-teal-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-teal-800 mb-1 drop-shadow-sm",children:"SuperAdmin Dashboard"}),e.jsx("p",{className:"text-base sm:text-lg text-teal-600 font-medium",children:"Manage users, monitor system health, and oversee operations"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(L,{onClick:c,variant:"outline",size:"sm",className:"border-teal-200",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),o&&e.jsx(U,{message:o,onRetry:c}),e.jsx("div",{className:"rounded-2xl bg-white/80 shadow-lg p-4 sm:p-6 mb-6",children:e.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(n,{title:"Total Users",value:(s==null?void 0:s.totalUsers)||0,icon:e.jsx(C,{className:"h-5 w-5"}),trend:"+12%",trendValue:"from last month"}),e.jsx(n,{title:"Total Admins",value:(s==null?void 0:s.totalAdmins)||0,icon:e.jsx(k,{className:"h-5 w-5"}),trend:"+5%",trendValue:"from last month"}),e.jsx(n,{title:"Total Clients",value:(s==null?void 0:s.totalClients)||0,icon:e.jsx(A,{className:"h-5 w-5"}),trend:"+18%",trendValue:"from last month"}),e.jsx(n,{title:"Total Bookings",value:(s==null?void 0:s.totalBookings)||0,icon:e.jsx(D,{className:"h-5 w-5"}),trend:"+25%",trendValue:"from last month"})]})}),e.jsx("div",{className:"rounded-2xl bg-white/80 shadow-lg p-4 sm:p-6 mb-8",children:e.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(n,{title:"Total Revenue",value:`$${((s==null?void 0:s.totalRevenue)||0).toLocaleString()}`,icon:e.jsx(R,{className:"h-5 w-5"}),trend:"+15%",trendValue:"from last month"}),e.jsx(n,{title:"System Health",value:((d=s==null?void 0:s.systemHealth)==null?void 0:d.databaseStatus)||"Unknown",icon:e.jsx(B,{className:"h-5 w-5 text-green-500"})}),e.jsx(n,{title:"API Status",value:((h=s==null?void 0:s.systemHealth)==null?void 0:h.apiStatus)||"Unknown",icon:e.jsx(E,{className:"h-5 w-5"})}),e.jsx(n,{title:"Last Backup",value:(m=s==null?void 0:s.systemHealth)!=null&&m.lastBackup?new Date(s.systemHealth.lastBackup).toLocaleDateString():"No backup",icon:e.jsx(H,{className:"h-5 w-5"})})]})}),e.jsxs(p,{className:"rounded-2xl shadow-lg bg-white/90 p-6",children:[e.jsx(f,{className:"mb-2",children:e.jsxs(y,{className:"flex items-center gap-3 text-xl text-teal-800 font-bold",children:[e.jsx(N,{className:"h-6 w-6"}),"Recent Activity"]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-5",children:[t==null?void 0:t.slice(0,5).map(a=>{var l,i;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-teal-100 rounded-xl bg-teal-50/40 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(N,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[a.action," ",a.entity]}),e.jsxs("p",{className:"text-sm text-teal-600",children:["by ",((l=a.user)==null?void 0:l.name)||"System"," â€¢"," ",new Date(a.createdAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"secondary",className:"text-xs px-3 py-1 rounded-full",children:((i=a.user)==null?void 0:i.role)||"System"})]},a.id)}),(!t||t.length===0)&&e.jsx("div",{className:"text-center text-teal-400 py-8 text-lg font-medium",children:"No recent activity found."})]})})]})]})})};export{K as default};

import{j as e}from"./ui-vendor-BPnJF_7J.js";import{C as l,a as o,b as c,d as i}from"./card-CoINBLpb.js";import{B as y}from"./badge-CVKJlgmv.js";import{S as d}from"./skeleton-BmX8kKu8.js";import{E as N}from"./error-message-yDPqqqhZ.js";import{B as C}from"./index-C5bx2-Fn.js";import{r as a}from"./react-vendor-Bgq3EpD8.js";import{s as v}from"./superadminApi-Bft6DRZm.js";import"./query-vendor-B3bfG-l7.js";import"./utils-vendor-Dq7h7Pqt.js";const R=()=>{const[s,r]=a.useState(null),[u,m]=a.useState(!0),[x,h]=a.useState(null),n=a.useCallback(async()=>{m(!0),h(null);try{const t=await v.getSystemHealth();r(t.data)}catch{h("Failed to fetch system health")}finally{m(!1)}},[]),j=a.useCallback(t=>{switch(t.toLowerCase()){case"healthy":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"degraded":return"bg-orange-100 text-orange-800";case"error":case"slow":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},[]),g=a.useCallback(t=>{const S=Math.floor(t/86400),p=Math.floor(t%86400/3600),w=Math.floor(t%3600/60);return S>0?`${S}d ${p}h ${w}m`:p>0?`${p}h ${w}m`:`${w}m`},[]),b=a.useCallback(t=>`${t.toFixed(2)}%`,[]),f=a.useCallback(()=>s?s.databaseStatus==="healthy"&&s.apiStatus==="healthy"&&(s.errorRate||0)<5?"healthy":"degraded":"unknown",[s]),k=a.useCallback(()=>f()==="healthy"?"All Systems Operational":"System Issues Detected",[f]);return a.useEffect(()=>{n();const t=setInterval(n,3e4);return()=>clearInterval(t)},[n]),{health:s,loading:u,error:x,fetchHealth:n,getStatusColor:j,formatUptime:g,formatErrorRate:b,getOverallStatus:f,getOverallStatusText:k}},D=()=>{const{health:s,loading:r,error:u,fetchHealth:m,getStatusColor:x,formatUptime:h,formatErrorRate:n,getOverallStatus:j,getOverallStatusText:g}=R();return e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-br from-white to-teal-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"System Health"}),e.jsx(C,{onClick:m,disabled:r,className:"w-full sm:w-auto",children:r?"Refreshing...":"Refresh"})]}),u&&e.jsx(N,{message:u,onRetry:m}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(c,{children:"Database Status"})}),e.jsx(i,{children:r?e.jsx(d,{className:"h-8 w-32"}):e.jsx(y,{className:x((s==null?void 0:s.databaseStatus)||"unknown"),children:(s==null?void 0:s.databaseStatus)||"Unknown"})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(c,{children:"API Status"})}),e.jsx(i,{children:r?e.jsx(d,{className:"h-8 w-32"}):e.jsx(y,{className:x((s==null?void 0:s.apiStatus)||"unknown"),children:(s==null?void 0:s.apiStatus)||"Unknown"})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(c,{children:"Last Backup"})}),e.jsx(i,{children:r?e.jsx(d,{className:"h-8 w-32"}):e.jsx("span",{className:"text-sm",children:s!=null&&s.lastBackup?new Date(s.lastBackup).toLocaleString():"No backup found"})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(c,{children:"System Uptime"})}),e.jsx(i,{children:r?e.jsx(d,{className:"h-8 w-32"}):e.jsx("span",{className:"text-sm font-mono",children:s!=null&&s.systemUptime?h(s.systemUptime):"Unknown"})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(c,{children:"Error Rate (24h)"})}),e.jsx(i,{children:r?e.jsx(d,{className:"h-8 w-32"}):e.jsx("span",{className:`text-sm font-semibold ${((s==null?void 0:s.errorRate)||0)>10?"text-red-600":((s==null?void 0:s.errorRate)||0)>5?"text-yellow-600":"text-green-600"}`,children:(s==null?void 0:s.errorRate)!==void 0?n(s.errorRate):"Unknown"})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(c,{children:"Overall Status"})}),e.jsx(i,{children:r?e.jsx(d,{className:"h-8 w-32"}):e.jsx(y,{className:x(j()),children:g()})})]})]})]})})};export{D as default};

import{j as e,a8 as S,J as C,a0 as A,a9 as k,M as D,aa as R,a7 as B,ab as E,a1 as H,ac as N}from"./ui-vendor-Dho0S5x9.js";import{C as p,a as f,d as b,b as y}from"./card-C7BQZI4A.js";import{B as L}from"./index-DMYsCFYG.js";import{B as T}from"./badge-C0YrEax5.js";import{S as u}from"./skeleton-XnDLFZGi.js";import{E as U}from"./error-message-D3zDD8H-.js";import{a as l}from"./react-vendor-ByNQKlCH.js";import{s as w}from"./superadminApi-Bjf7uKUS.js";import"./query-vendor-Br3W6GMP.js";import"./utils-vendor-Dq7h7Pqt.js";function V(){const[s,a]=l.useState(null),[i,n]=l.useState([]),[o,t]=l.useState(!0),[m,g]=l.useState(null),[j,c]=l.useState(!1),x=l.useCallback(async()=>{try{g(null);const[d,h]=await Promise.all([w.getDashboardStats(),w.getRecentActivity(20)]);a(d.data),n(h.data)}catch(d){console.error("Error fetching dashboard data:",d);let h="Failed to load dashboard data";d instanceof Error&&(h=d.message),g(h)}},[]),v=l.useCallback(async()=>{try{c(!0),await x()}finally{c(!1)}},[x]);return l.useEffect(()=>{x().finally(()=>{t(!1)})},[x]),{stats:s,recentActivity:i,loading:o,error:m,refreshing:j,refreshDashboard:v,setRefreshing:c}}const r=({title:s,value:a,icon:i,trend:n,trendValue:o,className:t=""})=>{const j=s==="System Health"||s==="API Status"?(c=>{switch(c.toLowerCase()){case"healthy":return"text-green-600";case"warning":return"text-yellow-600";case"degraded":return"text-orange-600";case"error":case"slow":return"text-red-600";default:return"text-gray-600"}})(a):"";return e.jsxs(p,{className:`p-6 shadow-md rounded-2xl bg-white/90 ${t}`,children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-base font-semibold text-gray-800",children:s}),e.jsx("div",{className:"h-5 w-5 text-teal-600 bg-teal-50 rounded-full flex items-center justify-center",children:i})]}),e.jsxs(b,{children:[e.jsx("div",{className:`text-3xl font-extrabold mb-1 ${j||"text-teal-800"}`,children:a}),n&&e.jsxs("p",{className:"text-xs text-teal-500 font-medium",children:[n," ",o]})]})]})},K=()=>{const{stats:s,recentActivity:a,loading:i,error:n,refreshDashboard:o}=V();return i?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((t,m)=>e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"h-4 w-24"}),e.jsx(u,{className:"h-4 w-4"})]}),e.jsxs(b,{children:[e.jsx(u,{className:"h-8 w-16 mb-2"}),e.jsx(u,{className:"h-3 w-20"})]})]},m))})}):e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-br from-white to-teal-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-teal-800 mb-1 drop-shadow-sm",children:"SuperAdmin Dashboard"}),e.jsx("p",{className:"text-base sm:text-lg text-teal-600 font-medium",children:"Manage users, monitor system health, and oversee operations"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(L,{onClick:o,variant:"outline",size:"sm",className:"border-teal-200",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),n&&e.jsx(U,{message:n,onRetry:o}),e.jsx("div",{className:"rounded-2xl bg-white/80 shadow-lg p-4 sm:p-6 mb-6",children:e.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(r,{title:"Total Users",value:s?.totalUsers||0,icon:e.jsx(C,{className:"h-5 w-5"}),trend:"+12%",trendValue:"from last month"}),e.jsx(r,{title:"Total Admins",value:s?.totalAdmins||0,icon:e.jsx(A,{className:"h-5 w-5"}),trend:"+5%",trendValue:"from last month"}),e.jsx(r,{title:"Total Clients",value:s?.totalClients||0,icon:e.jsx(k,{className:"h-5 w-5"}),trend:"+18%",trendValue:"from last month"}),e.jsx(r,{title:"Total Bookings",value:s?.totalBookings||0,icon:e.jsx(D,{className:"h-5 w-5"}),trend:"+25%",trendValue:"from last month"})]})}),e.jsx("div",{className:"rounded-2xl bg-white/80 shadow-lg p-4 sm:p-6 mb-8",children:e.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(r,{title:"Total Revenue",value:`$${(s?.totalRevenue||0).toLocaleString()}`,icon:e.jsx(R,{className:"h-5 w-5"}),trend:"+15%",trendValue:"from last month"}),e.jsx(r,{title:"System Health",value:s?.systemHealth?.databaseStatus||"Unknown",icon:e.jsx(B,{className:"h-5 w-5 text-green-500"})}),e.jsx(r,{title:"API Status",value:s?.systemHealth?.apiStatus||"Unknown",icon:e.jsx(E,{className:"h-5 w-5"})}),e.jsx(r,{title:"Last Backup",value:s?.systemHealth?.lastBackup?new Date(s.systemHealth.lastBackup).toLocaleDateString():"No backup",icon:e.jsx(H,{className:"h-5 w-5"})})]})}),e.jsxs(p,{className:"rounded-2xl shadow-lg bg-white/90 p-6",children:[e.jsx(f,{className:"mb-2",children:e.jsxs(y,{className:"flex items-center gap-3 text-xl text-teal-800 font-bold",children:[e.jsx(N,{className:"h-6 w-6"}),"Recent Activity"]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-5",children:[a?.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-teal-100 rounded-xl bg-teal-50/40 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(N,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[t.action," ",t.entity]}),e.jsxs("p",{className:"text-sm text-teal-600",children:["by ",t.user?.name||"System"," â€¢"," ",new Date(t.createdAt).toLocaleDateString()]})]})]}),e.jsx(T,{variant:"secondary",className:"text-xs px-3 py-1 rounded-full",children:t.user?.role||"System"})]},t.id)),(!a||a.length===0)&&e.jsx("div",{className:"text-center text-teal-400 py-8 text-lg font-medium",children:"No recent activity found."})]})})]})]})})};export{K as default};

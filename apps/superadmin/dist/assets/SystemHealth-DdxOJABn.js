import{j as e}from"./ui-vendor-Dho0S5x9.js";import{C as n,a as o,b as c,d as i}from"./card-C7BQZI4A.js";import{B as y}from"./badge-C0YrEax5.js";import{S as h}from"./skeleton-XnDLFZGi.js";import{E as N}from"./error-message-D3zDD8H-.js";import{B as C}from"./index-DMYsCFYG.js";import{a as r}from"./react-vendor-ByNQKlCH.js";import{s as v}from"./superadminApi-Bjf7uKUS.js";import"./query-vendor-Br3W6GMP.js";import"./utils-vendor-Dq7h7Pqt.js";const R=()=>{const[t,a]=r.useState(null),[x,d]=r.useState(!0),[m,u]=r.useState(null),l=r.useCallback(async()=>{d(!0),u(null);try{const s=await v.getSystemHealth();a(s.data)}catch{u("Failed to fetch system health")}finally{d(!1)}},[]),j=r.useCallback(s=>{switch(s.toLowerCase()){case"healthy":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"degraded":return"bg-orange-100 text-orange-800";case"error":case"slow":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},[]),g=r.useCallback(s=>{const S=Math.floor(s/86400),p=Math.floor(s%86400/3600),w=Math.floor(s%3600/60);return S>0?`${S}d ${p}h ${w}m`:p>0?`${p}h ${w}m`:`${w}m`},[]),b=r.useCallback(s=>`${s.toFixed(2)}%`,[]),f=r.useCallback(()=>t?t.databaseStatus==="healthy"&&t.apiStatus==="healthy"&&(t.errorRate||0)<5?"healthy":"degraded":"unknown",[t]),k=r.useCallback(()=>f()==="healthy"?"All Systems Operational":"System Issues Detected",[f]);return r.useEffect(()=>{l();const s=setInterval(l,3e4);return()=>clearInterval(s)},[l]),{health:t,loading:x,error:m,fetchHealth:l,getStatusColor:j,formatUptime:g,formatErrorRate:b,getOverallStatus:f,getOverallStatusText:k}},D=()=>{const{health:t,loading:a,error:x,fetchHealth:d,getStatusColor:m,formatUptime:u,formatErrorRate:l,getOverallStatus:j,getOverallStatusText:g}=R();return e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-br from-white to-teal-50",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"System Health"}),e.jsx(C,{onClick:d,disabled:a,className:"w-full sm:w-auto",children:a?"Refreshing...":"Refresh"})]}),x&&e.jsx(N,{message:x,onRetry:d}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(c,{children:"Database Status"})}),e.jsx(i,{children:a?e.jsx(h,{className:"h-8 w-32"}):e.jsx(y,{className:m(t?.databaseStatus||"unknown"),children:t?.databaseStatus||"Unknown"})})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(c,{children:"API Status"})}),e.jsx(i,{children:a?e.jsx(h,{className:"h-8 w-32"}):e.jsx(y,{className:m(t?.apiStatus||"unknown"),children:t?.apiStatus||"Unknown"})})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(c,{children:"Last Backup"})}),e.jsx(i,{children:a?e.jsx(h,{className:"h-8 w-32"}):e.jsx("span",{className:"text-sm",children:t?.lastBackup?new Date(t.lastBackup).toLocaleString():"No backup found"})})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(c,{children:"System Uptime"})}),e.jsx(i,{children:a?e.jsx(h,{className:"h-8 w-32"}):e.jsx("span",{className:"text-sm font-mono",children:t?.systemUptime?u(t.systemUptime):"Unknown"})})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(c,{children:"Error Rate (24h)"})}),e.jsx(i,{children:a?e.jsx(h,{className:"h-8 w-32"}):e.jsx("span",{className:`text-sm font-semibold ${(t?.errorRate||0)>10?"text-red-600":(t?.errorRate||0)>5?"text-yellow-600":"text-green-600"}`,children:t?.errorRate!==void 0?l(t.errorRate):"Unknown"})})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(c,{children:"Overall Status"})}),e.jsx(i,{children:a?e.jsx(h,{className:"h-8 w-32"}):e.jsx(y,{className:m(j()),children:g()})})]})]})]})})};export{D as default};

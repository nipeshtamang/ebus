import{j as e,h as se,B as V,i as ae,d as te,U as re,k as q,L as I,E as M,l as U,m as A,e as le}from"./ui-vendor-DMBPzNwu.js";import{r as i,f as ie}from"./react-vendor-C8rorRqO.js";import{B as W}from"./badge-BRWl9YMx.js";import{e as _,f as S,t as ne,C as E,a as O,c as B,g as T,d as L,I as b,B as h}from"./api-C7d73vgv.js";import{L as w}from"./label-CZBUESOW.js";import{u as H,R as ce}from"./index-DnDBnOSx.js";import{A as F}from"./utils-vendor-BIYRr1x_.js";import"./query-vendor-Dv9SXHgC.js";const oe=se("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function y({className:f,variant:n,...g}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:_(oe({variant:n}),f),...g})}function k({className:f,...n}){return e.jsx("div",{"data-slot":"alert-description",className:_("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",f),...n})}function de(){const[f,n]=i.useState(!1),[g,o]=i.useState(null),{login:p}=H(),C=i.useCallback(async(l,d)=>{var m,t,r;n(!0),o(null);try{const s=await S.post("/auth/login",{email:l,password:d});return s.data.token&&s.data.user?(p(s.data.token,s.data.user),!0):!1}catch(s){console.log("Login error:",s,(m=s==null?void 0:s.response)==null?void 0:m.data);let u="Login failed. Please try again.";return s instanceof F&&((r=(t=s.response)==null?void 0:t.data)!=null&&r.message)?u=s.response.data.message:s instanceof Error&&(u=s.message),o(u),!1}finally{n(!1)}},[p]),c=i.useCallback(async l=>{var d,m;n(!0),o(null);try{return await S.post("/auth/send-otp",{email:l}),!0}catch(t){let r="Failed to send reset link";return t instanceof F&&((m=(d=t.response)==null?void 0:d.data)!=null&&m.message)?r=t.response.data.message:t instanceof Error&&(r=t.message),o(r),!1}finally{n(!1)}},[]),z=i.useCallback(async(l,d)=>{var m,t;n(!0),o(null);try{return await S.post("/auth/verify-otp",{email:l,otp:d}),!0}catch(r){let s="Invalid OTP";return r instanceof F&&((t=(m=r.response)==null?void 0:m.data)!=null&&t.message)?s=r.response.data.message:r instanceof Error&&(s=r.message),o(s),!1}finally{n(!1)}},[]),x=i.useCallback(async(l,d,m)=>{var t,r;n(!0),o(null);try{return await S.post("/auth/reset-password",{email:l,otp:d,newPassword:m}),!0}catch(s){let u="Failed to reset password";return s instanceof F&&((r=(t=s.response)==null?void 0:t.data)!=null&&r.message)?u=s.response.data.message:s instanceof Error&&(u=s.message),o(u),!1}finally{n(!1)}},[]);return{loading:f,error:g,login:C,forgotPassword:c,verifyOTP:z,resetPassword:x}}function we(){const f=ie(),{user:n}=H(),[g,o]=i.useState("login"),[p,C]=i.useState(!1),[c,z]=i.useState({email:"",password:""}),[x,l]=i.useState(""),[d,m]=i.useState(""),[t,r]=i.useState(!1),[s,u]=i.useState(!1),[D]=i.useState(!1),{loading:N,login:R,forgotPassword:$,verifyOTP:G,resetPassword:J}=de();i.useEffect(()=>{D&&n&&f(ce.AdminDashboard)},[D,n,f]);const K=i.useCallback(ne(async(a,j)=>{if(l(""),!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(a)){l("Please enter a valid email address.");return}await R(a,j)},1e3),[R]),Q=async a=>{a.preventDefault(),!N&&K(c.email,c.password)},X=async a=>{a.preventDefault(),l(""),await $(c.email)&&(u(!0),o("otp"))},v=a=>{l(""),o(a)},Y=async a=>{a.preventDefault(),await G(c.email,d)&&o("reset")},Z=async a=>{if(a.preventDefault(),l(""),c.password!==d){l("OTP does not match");return}await J(c.email,d,c.password)&&(o("login"),u(!1),m(""),r(!1),l(""))},P=(a,j)=>{z(ee=>({...ee,[a]:j})),a==="email"&&x&&l("")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-primary relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary to-primary/80"}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12 text-white",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(V,{className:"h-10 w-10"}),e.jsx("span",{className:"text-3xl font-bold",children:"BusBooking Pro"})]}),e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Welcome to the Future of Bus Travel"}),e.jsx("p",{className:"text-xl text-primary-foreground/90 mb-8",children:"Connect with millions of travelers and manage bookings with our comprehensive platform."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(ae,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Secure & Trusted"}),e.jsx("p",{className:"text-primary-foreground/80",children:"Bank-level security for all transactions"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(te,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"24/7 Support"}),e.jsx("p",{className:"text-primary-foreground/80",children:"Round-the-clock customer assistance"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Trusted by Millions"}),e.jsx("p",{className:"text-primary-foreground/80",children:"Over 2M+ happy customers worldwide"})]})]})]}),e.jsxs("div",{className:"mt-12 flex items-center gap-4",children:[e.jsx(W,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"â­ 4.8/5 Rating"}),e.jsx(W,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"ðŸ† Best Travel App 2024"})]})]}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-white/10 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-32 w-20 h-20 bg-white/10 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 bg-white/10 rounded-full"})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(V,{className:"h-8 w-8 text-primary"}),e.jsx("span",{className:"text-2xl font-bold",children:"BusBooking Pro"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to your account"})]}),g==="login"&&e.jsxs(E,{className:"shadow-lg border-0",children:[e.jsxs(O,{className:"text-center pb-4",children:[e.jsx(B,{className:"text-2xl font-bold",children:"Welcome Back"}),e.jsx(T,{children:"Sign in to your account to continue"})]}),e.jsxs(L,{className:"space-y-6",children:[x&&e.jsx(y,{children:e.jsx(k,{children:x})}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(b,{id:"email",type:"email",placeholder:"Enter your email",value:c.email,onChange:a=>P("email",a.target.value),className:"pl-10",required:!0})]})]}),e.jsx(w,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(b,{id:"password",type:p?"text":"password",placeholder:"Enter your password",value:c.password,onChange:a=>P("password",a.target.value),className:"pl-10 pr-10",required:!0}),e.jsx(h,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>C(!p),children:p?e.jsx(M,{className:"h-4 w-4"}):e.jsx(U,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"remember",className:"rounded"}),e.jsx(w,{htmlFor:"remember",className:"text-sm",children:"Remember me"})]}),e.jsx(h,{type:"button",variant:"link",className:"px-0 text-primary",onClick:()=>v("forgot"),children:"Forgot password?"}),e.jsx(h,{type:"submit",className:"w-full",size:"lg",disabled:N,children:N?"Signing in...":"Sign In"})]})]})]}),g==="forgot"&&e.jsxs(E,{className:"shadow-lg border-0",children:[e.jsxs(O,{className:"text-center pb-4",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"absolute left-4 top-4",onClick:()=>v("login"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(B,{className:"text-2xl font-bold",children:"Forgot Password?"}),e.jsx(T,{children:"No worries! Enter your email and we'll send you a reset link."})]}),e.jsxs(L,{className:"space-y-6",children:[x&&e.jsx(y,{children:e.jsx(k,{children:x})}),s?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(le,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Check your email"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["We've sent a password reset link to ",c.email]}),e.jsx(y,{children:e.jsxs(k,{children:["Didn't receive the email? Check your spam folder or"," ",e.jsx(h,{variant:"link",className:"px-0 h-auto text-primary",onClick:()=>u(!1),children:"try again"})]})})]}),e.jsx(h,{variant:"outline",className:"w-full",onClick:()=>v("otp"),children:"I have the reset code"})]}):e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(b,{id:"email",type:"email",placeholder:"Enter your email",value:c.email,onChange:a=>P("email",a.target.value),className:"pl-10",required:!0})]})]}),e.jsx(h,{type:"submit",className:"w-full",size:"lg",disabled:N,children:N?"Sending...":"Send OTP"})]})]})]}),g==="otp"&&e.jsxs(E,{className:"shadow-lg border-0",children:[e.jsxs(O,{className:"text-center pb-4",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"absolute left-4 top-4",onClick:()=>v("forgot"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(B,{className:"text-2xl font-bold",children:"Enter OTP"}),e.jsx(T,{children:"Check your email for the OTP code."})]}),e.jsxs(L,{className:"space-y-6",children:[x&&e.jsx(y,{children:e.jsx(k,{children:x})}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"otp",children:"OTP Code"}),e.jsx("div",{className:"relative",children:e.jsx(b,{id:"otp",type:"text",placeholder:"Enter OTP code",value:d,onChange:a=>m(a.target.value),className:"pl-10",required:!0})})]}),e.jsx(h,{type:"submit",className:"w-full",size:"lg",disabled:t,children:t?"Verifying...":"Verify OTP"})]})]})]}),g==="reset"&&e.jsxs(E,{className:"shadow-lg border-0",children:[e.jsxs(O,{className:"text-center pb-4",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"absolute left-4 top-4",onClick:()=>v("otp"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(B,{className:"text-2xl font-bold",children:"Reset Password"}),e.jsx(T,{children:"Enter your new password below"})]}),e.jsxs(L,{className:"space-y-6",children:[x&&e.jsx(y,{children:e.jsx(k,{children:x})}),e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsx(w,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(b,{id:"password",type:p?"text":"password",placeholder:"Enter new password",value:c.password,onChange:a=>P("password",a.target.value),className:"pl-10 pr-10",required:!0}),e.jsx(h,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>C(!p),children:p?e.jsx(M,{className:"h-4 w-4"}):e.jsx(U,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"mb-2",children:"Password must contain:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ At least 8 characters"}),e.jsx("li",{children:"â€¢ One uppercase letter"}),e.jsx("li",{children:"â€¢ One lowercase letter"}),e.jsx("li",{children:"â€¢ One number"})]})]}),e.jsx(h,{type:"submit",className:"w-full",size:"lg",disabled:t,children:t?"Resetting...":"Reset Password"})]})]})]})]})})]})}export{we as LoginPage};

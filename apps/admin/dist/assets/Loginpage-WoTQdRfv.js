import{j as e,h as se,B as R,i as ae,d as te,U as re,k as V,L as q,E as I,l as M,m as z,e as le}from"./ui-vendor-BA4r0Vfc.js";import{a as i,i as ie}from"./react-vendor-CIX8g8kC.js";import{B as U}from"./badge-sFmlWEB5.js";import{e as W,f as C,t as ne,C as P,a as S,c as E,g as O,d as B,I as N,B as d}from"./api-CX4-puwJ.js";import{L as f}from"./label-DadenG8h.js";import{u as _,R as ce}from"./index-DiI8FQ00.js";import{A as T}from"./utils-vendor-D-f4oM49.js";import"./query-vendor-COMjhFa0.js";const oe=se("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function v({className:x,variant:n,...u}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:W(oe({variant:n}),x),...u})}function b({className:x,...n}){return e.jsx("div",{"data-slot":"alert-description",className:W("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",x),...n})}function de(){const[x,n]=i.useState(!1),[u,o]=i.useState(null),{login:h}=_(),y=i.useCallback(async(r,l)=>{n(!0),o(null);try{const s=await C.post("/auth/login",{email:r,password:l});return s.data.token&&s.data.user?(h(s.data.token,s.data.user),!0):!1}catch(s){console.log("Login error:",s,s?.response?.data);let t="Login failed. Please try again.";return s instanceof T&&s.response?.data?.message?t=s.response.data.message:s instanceof Error&&(t=s.message),o(t),!1}finally{n(!1)}},[h]),c=i.useCallback(async r=>{n(!0),o(null);try{return await C.post("/auth/send-otp",{email:r}),!0}catch(l){let s="Failed to send reset link";return l instanceof T&&l.response?.data?.message?s=l.response.data.message:l instanceof Error&&(s=l.message),o(s),!1}finally{n(!1)}},[]),L=i.useCallback(async(r,l)=>{n(!0),o(null);try{return await C.post("/auth/verify-otp",{email:r,otp:l}),!0}catch(s){let t="Invalid OTP";return s instanceof T&&s.response?.data?.message?t=s.response.data.message:s instanceof Error&&(t=s.message),o(t),!1}finally{n(!1)}},[]),m=i.useCallback(async(r,l,s)=>{n(!0),o(null);try{return await C.post("/auth/reset-password",{email:r,otp:l,newPassword:s}),!0}catch(t){let g="Failed to reset password";return t instanceof T&&t.response?.data?.message?g=t.response.data.message:t instanceof Error&&(g=t.message),o(g),!1}finally{n(!1)}},[]);return{loading:x,error:u,login:y,forgotPassword:c,verifyOTP:L,resetPassword:m}}function we(){const x=ie(),{user:n}=_(),[u,o]=i.useState("login"),[h,y]=i.useState(!1),[c,L]=i.useState({email:"",password:""}),[m,r]=i.useState(""),[l,s]=i.useState(""),[t,g]=i.useState(!1),[H,F]=i.useState(!1),[A]=i.useState(!1),{loading:j,login:D,forgotPassword:$,verifyOTP:G,resetPassword:J}=de();i.useEffect(()=>{A&&n&&x(ce.AdminDashboard)},[A,n,x]);const K=i.useCallback(ne(async(a,p)=>{if(r(""),!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(a)){r("Please enter a valid email address.");return}await D(a,p)},1e3),[D]),Q=async a=>{a.preventDefault(),!j&&K(c.email,c.password)},X=async a=>{a.preventDefault(),r(""),await $(c.email)&&(F(!0),o("otp"))},w=a=>{r(""),o(a)},Y=async a=>{a.preventDefault(),await G(c.email,l)&&o("reset")},Z=async a=>{if(a.preventDefault(),r(""),c.password!==l){r("OTP does not match");return}await J(c.email,l,c.password)&&(o("login"),F(!1),s(""),g(!1),r(""))},k=(a,p)=>{L(ee=>({...ee,[a]:p})),a==="email"&&m&&r("")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-primary relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary to-primary/80"}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center px-12 text-white",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(R,{className:"h-10 w-10"}),e.jsx("span",{className:"text-3xl font-bold",children:"BusBooking Pro"})]}),e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Welcome to the Future of Bus Travel"}),e.jsx("p",{className:"text-xl text-primary-foreground/90 mb-8",children:"Connect with millions of travelers and manage bookings with our comprehensive platform."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(ae,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Secure & Trusted"}),e.jsx("p",{className:"text-primary-foreground/80",children:"Bank-level security for all transactions"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(te,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"24/7 Support"}),e.jsx("p",{className:"text-primary-foreground/80",children:"Round-the-clock customer assistance"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(re,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Trusted by Millions"}),e.jsx("p",{className:"text-primary-foreground/80",children:"Over 2M+ happy customers worldwide"})]})]})]}),e.jsxs("div",{className:"mt-12 flex items-center gap-4",children:[e.jsx(U,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"⭐ 4.8/5 Rating"}),e.jsx(U,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"🏆 Best Travel App 2024"})]})]}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-white/10 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-32 w-20 h-20 bg-white/10 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 bg-white/10 rounded-full"})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(R,{className:"h-8 w-8 text-primary"}),e.jsx("span",{className:"text-2xl font-bold",children:"BusBooking Pro"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to your account"})]}),u==="login"&&e.jsxs(P,{className:"shadow-lg border-0",children:[e.jsxs(S,{className:"text-center pb-4",children:[e.jsx(E,{className:"text-2xl font-bold",children:"Welcome Back"}),e.jsx(O,{children:"Sign in to your account to continue"})]}),e.jsxs(B,{className:"space-y-6",children:[m&&e.jsx(v,{children:e.jsx(b,{children:m})}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(N,{id:"email",type:"email",placeholder:"Enter your email",value:c.email,onChange:a=>k("email",a.target.value),className:"pl-10",required:!0})]})]}),e.jsx(f,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(N,{id:"password",type:h?"text":"password",placeholder:"Enter your password",value:c.password,onChange:a=>k("password",a.target.value),className:"pl-10 pr-10",required:!0}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>y(!h),children:h?e.jsx(I,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"remember",className:"rounded"}),e.jsx(f,{htmlFor:"remember",className:"text-sm",children:"Remember me"})]}),e.jsx(d,{type:"button",variant:"link",className:"px-0 text-primary",onClick:()=>w("forgot"),children:"Forgot password?"}),e.jsx(d,{type:"submit",className:"w-full",size:"lg",disabled:j,children:j?"Signing in...":"Sign In"})]})]})]}),u==="forgot"&&e.jsxs(P,{className:"shadow-lg border-0",children:[e.jsxs(S,{className:"text-center pb-4",children:[e.jsxs(d,{variant:"ghost",size:"sm",className:"absolute left-4 top-4",onClick:()=>w("login"),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(E,{className:"text-2xl font-bold",children:"Forgot Password?"}),e.jsx(O,{children:"No worries! Enter your email and we'll send you a reset link."})]}),e.jsxs(B,{className:"space-y-6",children:[m&&e.jsx(v,{children:e.jsx(b,{children:m})}),H?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(le,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Check your email"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["We've sent a password reset link to ",c.email]}),e.jsx(v,{children:e.jsxs(b,{children:["Didn't receive the email? Check your spam folder or"," ",e.jsx(d,{variant:"link",className:"px-0 h-auto text-primary",onClick:()=>F(!1),children:"try again"})]})})]}),e.jsx(d,{variant:"outline",className:"w-full",onClick:()=>w("otp"),children:"I have the reset code"})]}):e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(N,{id:"email",type:"email",placeholder:"Enter your email",value:c.email,onChange:a=>k("email",a.target.value),className:"pl-10",required:!0})]})]}),e.jsx(d,{type:"submit",className:"w-full",size:"lg",disabled:j,children:j?"Sending...":"Send OTP"})]})]})]}),u==="otp"&&e.jsxs(P,{className:"shadow-lg border-0",children:[e.jsxs(S,{className:"text-center pb-4",children:[e.jsxs(d,{variant:"ghost",size:"sm",className:"absolute left-4 top-4",onClick:()=>w("forgot"),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(E,{className:"text-2xl font-bold",children:"Enter OTP"}),e.jsx(O,{children:"Check your email for the OTP code."})]}),e.jsxs(B,{className:"space-y-6",children:[m&&e.jsx(v,{children:e.jsx(b,{children:m})}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"otp",children:"OTP Code"}),e.jsx("div",{className:"relative",children:e.jsx(N,{id:"otp",type:"text",placeholder:"Enter OTP code",value:l,onChange:a=>s(a.target.value),className:"pl-10",required:!0})})]}),e.jsx(d,{type:"submit",className:"w-full",size:"lg",disabled:t,children:t?"Verifying...":"Verify OTP"})]})]})]}),u==="reset"&&e.jsxs(P,{className:"shadow-lg border-0",children:[e.jsxs(S,{className:"text-center pb-4",children:[e.jsxs(d,{variant:"ghost",size:"sm",className:"absolute left-4 top-4",onClick:()=>w("otp"),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(E,{className:"text-2xl font-bold",children:"Reset Password"}),e.jsx(O,{children:"Enter your new password below"})]}),e.jsxs(B,{className:"space-y-6",children:[m&&e.jsx(v,{children:e.jsx(b,{children:m})}),e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsx(f,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(N,{id:"password",type:h?"text":"password",placeholder:"Enter new password",value:c.password,onChange:a=>k("password",a.target.value),className:"pl-10 pr-10",required:!0}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>y(!h),children:h?e.jsx(I,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"mb-2",children:"Password must contain:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"• At least 8 characters"}),e.jsx("li",{children:"• One uppercase letter"}),e.jsx("li",{children:"• One lowercase letter"}),e.jsx("li",{children:"• One number"})]})]}),e.jsx(d,{type:"submit",className:"w-full",size:"lg",disabled:t,children:t?"Resetting...":"Reset Password"})]})]})]})]})})]})}export{we as LoginPage};

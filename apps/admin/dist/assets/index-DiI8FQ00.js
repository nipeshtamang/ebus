const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Admindashboard-B_xVcSmi.js","assets/ui-vendor-BA4r0Vfc.js","assets/react-vendor-CIX8g8kC.js","assets/api-CX4-puwJ.js","assets/utils-vendor-D-f4oM49.js","assets/badge-sFmlWEB5.js","assets/AdminLayout-Dhh5Bieh.js","assets/skeleton-CJNjmkgT.js","assets/success-message-B9ZFEvVV.js","assets/query-vendor-COMjhFa0.js","assets/Loginpage-WoTQdRfv.js","assets/label-DadenG8h.js","assets/ForgotPassword-Cf0M5FVQ.js","assets/ScheduleList-Dc-9bZxv.js","assets/select-Bpe-XtYI.js","assets/bus-seat-layout-Bhp5QN2H.js","assets/BookingList-B9AyBnpt.js","assets/textarea-OUeqgjUD.js","assets/BookingForm-B4UposKB.js","assets/radio-group-ol_DI_-E.js","assets/PaymentHistory-DKsM4NSr.js","assets/BusSearchPage-DZMJny85.js","assets/Profile-CpV1P-Z-.js"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-vendor-BA4r0Vfc.js";import{e as N,g as R,a as n,f as k,h as y,N as b,B as C}from"./react-vendor-CIX8g8kC.js";import{Q as O,a as z}from"./query-vendor-COMjhFa0.js";import{a as j}from"./utils-vendor-D-f4oM49.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&p(s)}).observe(document,{childList:!0,subtree:!0});function l(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function p(r){if(r.ep)return;r.ep=!0;const o=l(r);fetch(r.href,o)}})();var _={},E;function B(){if(E)return _;E=1;var t=N();return _.createRoot=t.createRoot,_.hydrateRoot=t.hydrateRoot,_}var D=B();const T=R(D),A=n.createContext(void 0),F=({children:t})=>{const[m,l]=n.useState(null),[p,r]=n.useState(null),[o,s]=n.useState(!0),[c,v]=n.useState(!1),u=a=>{try{return JSON.parse(atob(a.split(".")[1])).exp*1e3<Date.now()}catch{return!0}};n.useEffect(()=>{(()=>{try{const d=localStorage.getItem("auth_token"),L=localStorage.getItem("auth_user");if(d&&L)if(u(d))console.log("Stored token is expired, clearing auth data"),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),r(null),l(null);else{const I=JSON.parse(L);r(d),l(I),j.defaults.headers.common.Authorization=`Bearer ${d}`}}catch(d){console.error("Error initializing auth:",d),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")}finally{s(!1),v(!0)}})()},[]);const x=(a,d)=>{r(a),l(d),localStorage.setItem("auth_token",a),localStorage.setItem("auth_user",JSON.stringify(d)),j.defaults.headers.common.Authorization=`Bearer ${a}`},f=()=>{r(null),l(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),delete j.defaults.headers.common.Authorization,window.location.pathname!=="/LoginPage"&&(window.location.href="/LoginPage")},h=a=>{if(m){const d={...m,...a};l(d),localStorage.setItem("auth_user",JSON.stringify(d))}},P=async()=>{try{const a=localStorage.getItem("auth_token");return a?u(a)?(f(),!1):!0:!1}catch(a){return console.error("Error refreshing token:",a),f(),!1}};return e.jsx(A.Provider,{value:{user:m,token:p,isLoading:o,isInitialized:c,login:x,logout:f,updateUser:h,refreshToken:P},children:t})};function U(){const t=n.useContext(A);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const V="modulepreload",q=function(t){return"/"+t},S={},g=function(m,l,p){let r=Promise.resolve();if(l&&l.length>0){let v=function(u){return Promise.all(u.map(x=>Promise.resolve(x).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");r=v(l.map(u=>{if(u=q(u),u in S)return;S[u]=!0;const x=u.endsWith(".css"),f=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=x?"stylesheet":V,x||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),x)return new Promise((P,a)=>{h.addEventListener("load",P),h.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return r.then(s=>{for(const c of s||[])c.status==="rejected"&&o(c.reason);return m().catch(o)})},i={LoginPage:"/LoginPage",ForgotPassword:"/forgot-password",AdminDashboard:"/AdminDashboard",ScheduleList:"/schedules",BookingList:"/bookings",BookingForm:"/bookings/new",PaymentHistory:"/payments",Profile:"/profile",BusSearchPage:"/bus-search"},$=n.lazy(()=>g(()=>import("./Admindashboard-B_xVcSmi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),H=n.lazy(()=>g(()=>import("./Loginpage-WoTQdRfv.js"),__vite__mapDeps([10,1,2,5,3,4,11,9])).then(t=>({default:t.LoginPage}))),J=n.lazy(()=>g(()=>import("./ForgotPassword-Cf0M5FVQ.js"),__vite__mapDeps([12,1,2,3,4,11,9]))),M=n.lazy(()=>g(()=>import("./ScheduleList-Dc-9bZxv.js"),__vite__mapDeps([13,1,2,3,4,5,14,6,15,7,9])).then(t=>({default:t.ScheduleList}))),Q=n.lazy(()=>g(()=>import("./BookingList-B9AyBnpt.js"),__vite__mapDeps([16,1,2,3,4,14,6,17,15,5,8,11,7,9])).then(t=>({default:t.BookingList}))),G=n.lazy(()=>g(()=>import("./BookingForm-B4UposKB.js"),__vite__mapDeps([18,1,2,3,4,11,19,6,15,5,9])).then(t=>({default:t.BookingForm}))),K=n.lazy(()=>g(()=>import("./PaymentHistory-DKsM4NSr.js"),__vite__mapDeps([20,1,2,3,4,5,14,17,11,6,8,9])).then(t=>({default:t.PaymentHistory}))),W=n.lazy(()=>g(()=>import("./BusSearchPage-DZMJny85.js"),__vite__mapDeps([21,1,2,5,3,4,11,19,6,15,9])).then(t=>({default:t.BusSearchPage}))),X=n.lazy(()=>g(()=>import("./Profile-CpV1P-Z-.js"),__vite__mapDeps([22,1,2,4,3,11,5,6,9]))),w=[{path:i.LoginPage,Component:H},{path:i.ForgotPassword,Component:J},{path:i.AdminDashboard,Component:$},{path:i.ScheduleList,Component:M},{path:i.BookingList,Component:Q},{path:i.BookingForm,Component:G},{path:i.PaymentHistory,Component:K},{path:i.BusSearchPage,Component:W},{path:i.Profile,Component:X}],Y=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-teal-50/30 to-cyan-50/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});function Z(){const{user:t,isLoading:m,isInitialized:l}=U(),p=[i.LoginPage,i.ForgotPassword],r=w.filter(o=>!p.includes(o.path));return!l||m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-teal-50/30 to-cyan-50/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Initializing..."})]})}):e.jsx("div",{className:"app-min-h-screen",children:e.jsx(n.Suspense,{fallback:e.jsx(Y,{}),children:e.jsxs(k,{children:[e.jsx(y,{path:"/",element:e.jsx(b,{to:t?i.AdminDashboard:i.LoginPage,replace:!0})}),p.map(o=>{const s=w.find(c=>c.path===o);return e.jsx(y,{path:o,element:t?e.jsx(b,{to:i.AdminDashboard,replace:!0}):s?e.jsx(s.Component,{}):e.jsx("div",{children:"Page not found"})},o)}),r.map(o=>e.jsx(y,{path:o.path,element:t?e.jsx(o.Component,{}):e.jsx(b,{to:i.LoginPage,replace:!0})},o.path)),e.jsx(y,{path:"*",element:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-teal-50/30 to-cyan-50/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex aspect-square size-20 items-center justify-center rounded-xl bg-gradient-to-br from-teal-500 via-cyan-500 to-blue-500 text-white shadow-lg mx-auto mb-6",children:e.jsx("span",{className:"text-4xl font-bold",children:"404"})}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The page you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white px-6 py-2 rounded-lg transition-all duration-200",children:"Go Back"})]})})})]})})})}function ee(){return e.jsx(Z,{})}const te=new O;T.createRoot(document.getElementById("root")).render(e.jsx(z,{client:te,children:e.jsx(C,{children:e.jsx(F,{children:e.jsx(ee,{})})})}));export{i as R,U as u};
